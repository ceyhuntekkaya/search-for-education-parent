developer@Ceyhuns-MacBook-Pro search-for-education-parent % mvn test

[INFO] Scanning for projects...
[WARNING]
[WARNING] Some problems were encountered while building the effective model for com.genixo.education:search:jar:0.0.1-SNAPSHOT
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.springframework.boot:spring-boot-starter-data-jpa:jar -> duplicate declaration of version (?) @ line 173, column 21
[WARNING]
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING]
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING]
[INFO]
[INFO] --------------------< com.genixo.education:search >---------------------
[INFO] Building search-for-education-parent 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- resources:3.3.1:resources (default-resources) @ search ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 4 resources from src/main/resources to target/classes
[INFO]
[INFO] --- compiler:3.8.1:compile (default-compile) @ search ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- resources:3.3.1:testResources (default-testResources) @ search ---
[INFO] skip non existing resourceDirectory /Users/developer/Desktop/Projects/search-for-education/search-for-education-parent/src/test/resources
[INFO]
[INFO] --- compiler:3.8.1:testCompile (default-testCompile) @ search ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 7 source files to /Users/developer/Desktop/Projects/search-for-education/search-for-education-parent/target/test-classes
[INFO]
[INFO] --- surefire:3.5.3:test (default-test) @ search ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO]
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.genixo.education.search.SearchForEducationParentApplicationTests
11:01:25.956 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.genixo.education.search.SearchForEducationParentApplicationTests]: SearchForEducationParentApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
11:01:26.044 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.genixo.education.search.SearchForEducationParentApplication for test class com.genixo.education.search.SearchForEducationParentApplicationTests

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.5)

2025-08-29T11:01:26.278+03:00  INFO 21884 --- [           main] SearchForEducationParentApplicationTests : Starting SearchForEducationParentApplicationTests using Java 23.0.1 with PID 21884 (started by developer in /Users/developer/Desktop/Projects/search-for-education/search-for-education-parent)
2025-08-29T11:01:26.278+03:00  INFO 21884 --- [           main] SearchForEducationParentApplicationTests : The following 1 profile is active: "auto-db-create"
2025-08-29T11:01:27.105+03:00  INFO 21884 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-29T11:01:27.222+03:00  INFO 21884 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 111 ms. Found 47 JPA repository interfaces.
2025-08-29T11:01:27.560+03:00  INFO 21884 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-29T11:01:27.696+03:00  INFO 21884 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5dd3727c
2025-08-29T11:01:27.697+03:00  INFO 21884 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-29T11:01:27.747+03:00  INFO 21884 --- [           main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.22.3 by Redgate
2025-08-29T11:01:27.747+03:00  INFO 21884 --- [           main] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi
2025-08-29T11:01:27.747+03:00  INFO 21884 --- [           main] o.f.c.internal.license.VersionPrinter    :
2025-08-29T11:01:27.777+03:00  INFO 21884 --- [           main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5432/search_edu_app (PostgreSQL 15.4)
2025-08-29T11:01:27.812+03:00  INFO 21884 --- [           main] o.f.core.internal.command.DbValidate     : Successfully validated 4 migrations (execution time 00:00.022s)
2025-08-29T11:01:27.828+03:00  INFO 21884 --- [           main] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 4
2025-08-29T11:01:27.830+03:00  INFO 21884 --- [           main] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
2025-08-29T11:01:27.897+03:00  INFO 21884 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-29T11:01:27.959+03:00  INFO 21884 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.26.Final
2025-08-29T11:01:28.011+03:00  INFO 21884 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-29T11:01:28.246+03:00  INFO 21884 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-29T11:01:28.275+03:00  WARN 21884 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-29T11:01:28.289+03:00  INFO 21884 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
        Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
        Database driver: undefined/unknown
        Database version: 15.4
        Autocommit mode: undefined/unknown
        Isolation level: undefined/unknown
        Minimum pool size: undefined/unknown
        Maximum pool size: undefined/unknown
2025-08-29T11:01:29.512+03:00  INFO 21884 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-29T11:01:29.514+03:00  INFO 21884 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-29T11:01:29.758+03:00  INFO 21884 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-29T11:01:33.273+03:00  INFO 21884 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-08-29T11:01:33.273+03:00  WARN 21884 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-08-29T11:01:34.885+03:00  WARN 21884 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-29T11:01:35.156+03:00  INFO 21884 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-08-29T11:01:35.263+03:00  INFO 21884 --- [           main] o.s.v.b.OptionalValidatorFactoryBean     : Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-08-29T11:01:35.476+03:00  INFO 21884 --- [           main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2025-08-29T11:01:35.540+03:00  INFO 21884 --- [           main] SearchForEducationParentApplicationTests : Started SearchForEducationParentApplicationTests in 9.429 seconds (process running for 10.067)
Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build as described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org.mockito/org/mockito/Mockito.html#0.3
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (/Users/developer/.m2/repository/net/bytebuddy/byte-buddy-agent/1.17.7/byte-buddy-agent-1.17.7.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.00 s -- in com.genixo.education.search.SearchForEducationParentApplicationTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$CreateSubscriptionPlanTests
2025-08-29T11:01:36.488+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription plan: ENTERPRISE
2025-08-29T11:01:36.490+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription plan created with ID: 3
2025-08-29T11:01:36.509+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription plan: ENTERPRISE
2025-08-29T11:01:36.515+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription plan: ENTERPRISE
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.620 s -- in com.genixo.education.search.service.SubscriptionServiceTest$CreateSubscriptionPlanTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$UpdateUsageCountersTests
2025-08-29T11:01:36.526+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Updating usage counters for campus: 1
2025-08-29T11:01:36.526+03:00  WARN 21884 --- [           main] c.g.e.s.service.SubscriptionService      : No active subscription found for campus: 1
2025-08-29T11:01:36.532+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Updating usage counters for campus: 1
2025-08-29T11:01:36.536+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Updating usage counters for campus: 1
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.019 s -- in com.genixo.education.search.service.SubscriptionServiceTest$UpdateUsageCountersTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$CheckUsageLimitsTests
2025-08-29T11:01:36.541+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Checking usage limits for campus: 999
2025-08-29T11:01:36.545+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Checking usage limits for campus: 1
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.SubscriptionServiceTest$CheckUsageLimitsTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionAnalyticsTests
2025-08-29T11:01:36.554+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching analytics for subscription: 1
2025-08-29T11:01:36.568+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching analytics for subscription: 1
[ERROR] Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.018 s <<< FAILURE! -- in com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionAnalyticsTests
[ERROR] com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionAnalyticsTests.shouldHandleSubscriptionWithNoPayments -- Time elapsed: 0.013 s <<< ERROR!
java.lang.NullPointerException: temporal
        at java.base/java.util.Objects.requireNonNull(Objects.java:246)
        at java.base/java.time.LocalDate.from(LocalDate.java:399)
        at java.base/java.time.LocalDateTime.from(LocalDateTime.java:458)
        at java.base/java.time.LocalDateTime.until(LocalDateTime.java:1677)
        at java.base/java.time.temporal.ChronoUnit.between(ChronoUnit.java:272)
        at com.genixo.education.search.service.SubscriptionService.getSubscriptionAnalytics(SubscriptionService.java:531)
        at com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionAnalyticsTests.shouldHandleSubscriptionWithNoPayments(SubscriptionServiceTest.java:976)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionAnalyticsTests.shouldReturnComprehensiveSubscriptionAnalytics -- Time elapsed: 0.003 s <<< ERROR!
java.lang.NullPointerException: temporal
        at java.base/java.util.Objects.requireNonNull(Objects.java:246)
        at java.base/java.time.LocalDate.from(LocalDate.java:399)
        at java.base/java.time.LocalDateTime.from(LocalDateTime.java:458)
        at java.base/java.time.LocalDateTime.until(LocalDateTime.java:1677)
        at java.base/java.time.temporal.ChronoUnit.between(ChronoUnit.java:272)
        at com.genixo.education.search.service.SubscriptionService.getSubscriptionAnalytics(SubscriptionService.java:531)
        at com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionAnalyticsTests.shouldReturnComprehensiveSubscriptionAnalytics(SubscriptionServiceTest.java:944)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$UpdateSubscriptionTests
2025-08-29T11:01:36.573+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Updating subscription: 1
2025-08-29T11:01:36.574+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription updated successfully: 1
2025-08-29T11:01:36.577+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Updating subscription: 1
2025-08-29T11:01:36.578+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription updated successfully: 1
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s -- in com.genixo.education.search.service.SubscriptionServiceTest$UpdateSubscriptionTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionPlanByIdTests
2025-08-29T11:01:36.585+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching subscription plan with ID: 999
2025-08-29T11:01:36.587+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching subscription plan with ID: 1
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s -- in com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionPlanByIdTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$GetAllSubscriptionPlansTests
2025-08-29T11:01:36.592+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching all subscription plans
2025-08-29T11:01:36.595+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching all subscription plans
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s -- in com.genixo.education.search.service.SubscriptionServiceTest$GetAllSubscriptionPlansTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests
2025-08-29T11:01:36.602+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Processing payment for subscription: 1
2025-08-29T11:01:36.605+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Processing payment for subscription: 1
2025-08-29T11:01:36.608+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Processing payment for subscription: 1
[ERROR] Tests run: 3, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 0.012 s <<< FAILURE! -- in com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests
[ERROR] com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests.shouldHandlePaymentProcessingException -- Time elapsed: 0.005 s <<< ERROR!
java.lang.NullPointerException: Cannot invoke "java.time.LocalDateTime.minusMonths(long)" because the return value of "com.genixo.education.search.entity.subscription.Subscription.getNextBillingDate()" is null
        at com.genixo.education.search.service.SubscriptionService.processPayment(SubscriptionService.java:940)
        at com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests.shouldHandlePaymentProcessingException(SubscriptionServiceTest.java:715)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests.shouldHandlePaymentFailureGracefully -- Time elapsed: 0.003 s <<< ERROR!
java.lang.NullPointerException: Cannot invoke "java.time.LocalDateTime.minusMonths(long)" because the return value of "com.genixo.education.search.entity.subscription.Subscription.getNextBillingDate()" is null
        at com.genixo.education.search.service.SubscriptionService.processPayment(SubscriptionService.java:940)
        at com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests.shouldHandlePaymentFailureGracefully(SubscriptionServiceTest.java:682)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests.shouldProcessPaymentSuccessfully -- Time elapsed: 0.003 s <<< ERROR!
java.lang.NullPointerException: Cannot invoke "java.time.LocalDateTime.minusMonths(long)" because the return value of "com.genixo.education.search.entity.subscription.Subscription.getNextBillingDate()" is null
        at com.genixo.education.search.service.SubscriptionService.processPayment(SubscriptionService.java:940)
        at com.genixo.education.search.service.SubscriptionServiceTest$ProcessPaymentTests.shouldProcessPaymentSuccessfully(SubscriptionServiceTest.java:646)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$ChangeSubscriptionPlanTests
2025-08-29T11:01:36.612+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Changing subscription plan for subscription: 1 to plan: 2
2025-08-29T11:01:36.616+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Changing subscription plan for subscription: 1 to plan: 2
2025-08-29T11:01:36.618+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Changing subscription plan for subscription: 1 to plan: 1
[ERROR] Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.010 s <<< FAILURE! -- in com.genixo.education.search.service.SubscriptionServiceTest$ChangeSubscriptionPlanTests
[ERROR] com.genixo.education.search.service.SubscriptionServiceTest$ChangeSubscriptionPlanTests.shouldChangeSubscriptionPlanSuccessfullyWithUpgrade -- Time elapsed: 0.003 s <<< ERROR!
java.lang.NullPointerException: temporal
        at java.base/java.util.Objects.requireNonNull(Objects.java:246)
        at java.base/java.time.LocalDate.from(LocalDate.java:399)
        at java.base/java.time.LocalDateTime.from(LocalDateTime.java:458)
        at java.base/java.time.LocalDateTime.until(LocalDateTime.java:1677)
        at java.base/java.time.temporal.ChronoUnit.between(ChronoUnit.java:272)
        at com.genixo.education.search.service.SubscriptionService.calculateProratedAmount(SubscriptionService.java:900)
        at com.genixo.education.search.service.SubscriptionService.changeSubscriptionPlan(SubscriptionService.java:251)
        at com.genixo.education.search.service.SubscriptionServiceTest$ChangeSubscriptionPlanTests.shouldChangeSubscriptionPlanSuccessfullyWithUpgrade(SubscriptionServiceTest.java:529)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$CancelSubscriptionTests
2025-08-29T11:01:36.622+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Canceling subscription: 1
2025-08-29T11:01:36.623+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription canceled successfully: 1
2025-08-29T11:01:36.626+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Canceling subscription: 1
2025-08-29T11:01:36.627+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription canceled successfully: 1
2025-08-29T11:01:36.629+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Canceling subscription: 1
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.010 s -- in com.genixo.education.search.service.SubscriptionServiceTest$CancelSubscriptionTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionByCampusIdTests
2025-08-29T11:01:36.632+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching subscription for campus: 1
2025-08-29T11:01:36.635+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching subscription for campus: 999
2025-08-29T11:01:36.637+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Fetching subscription for campus: 1
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.SubscriptionServiceTest$GetSubscriptionByCampusIdTests
[INFO] Running com.genixo.education.search.service.SubscriptionServiceTest$CreateSubscriptionTests
2025-08-29T11:01:36.640+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription for campus: 1 with plan: 999
2025-08-29T11:01:36.645+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription for campus: 1 with plan: 1
2025-08-29T11:01:36.646+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Applying discount with coupon: SAVE20
2025-08-29T11:01:36.646+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription created successfully with ID: 1
2025-08-29T11:01:36.649+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription for campus: 999 with plan: 1
2025-08-29T11:01:36.659+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription for campus: 1 with plan: 1
2025-08-29T11:01:36.659+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription created successfully with ID: 1
2025-08-29T11:01:36.663+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription for campus: 1 with plan: 2
2025-08-29T11:01:36.663+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating initial payment for subscription: null
2025-08-29T11:01:36.664+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Subscription created successfully with ID: null
2025-08-29T11:01:36.666+03:00  INFO 21884 --- [           main] c.g.e.s.service.SubscriptionService      : Creating subscription for campus: 1 with plan: 1
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.029 s -- in com.genixo.education.search.service.SubscriptionServiceTest$CreateSubscriptionTests
[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.771 s -- in com.genixo.education.search.service.SubscriptionServiceTest
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$DeleteBrandTests
2025-08-29T11:01:36.960+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Deleting brand with ID: 1
2025-08-29T11:01:36.962+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Deleting brand with ID: 1
2025-08-29T11:01:36.963+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand deleted successfully with ID: 1
2025-08-29T11:01:36.964+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Deleting brand with ID: 999
2025-08-29T11:01:36.966+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Deleting brand with ID: 1
2025-08-29T11:01:36.966+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand deleted successfully with ID: 1
2025-08-29T11:01:36.968+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Deleting brand with ID: 1
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.301 s -- in com.genixo.education.search.service.InstitutionServiceTest$DeleteBrandTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$UpdateBrandTests
2025-08-29T11:01:36.971+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Updating brand with ID: 999
2025-08-29T11:01:36.974+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Updating brand with ID: 1
2025-08-29T11:01:36.974+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand updated successfully with ID: 1
2025-08-29T11:01:36.976+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Updating brand with ID: 1
2025-08-29T11:01:36.978+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Updating brand with ID: 1
2025-08-29T11:01:36.979+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Updating brand with ID: 1
2025-08-29T11:01:36.979+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand updated successfully with ID: 1
2025-08-29T11:01:36.983+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Updating brand with ID: 1
2025-08-29T11:01:36.983+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand updated successfully with ID: 1
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 s -- in com.genixo.education.search.service.InstitutionServiceTest$UpdateBrandTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetBrandByIdTests
2025-08-29T11:01:36.986+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching brand with ID: 1
2025-08-29T11:01:36.988+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching brand with ID: 1
2025-08-29T11:01:36.990+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching brand with ID: 999
2025-08-29T11:01:36.992+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching brand with ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.InstitutionServiceTest$GetBrandByIdTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetCampusesByBrandTests
2025-08-29T11:01:36.995+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campuses for brand ID: 1
2025-08-29T11:01:37.001+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campuses for brand ID: 1
2025-08-29T11:01:37.003+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campuses for brand ID: 1
2025-08-29T11:01:37.005+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campuses for brand ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 s -- in com.genixo.education.search.service.InstitutionServiceTest$GetCampusesByBrandTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetCampusByIdTests
2025-08-29T11:01:37.007+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campus with ID: 999
2025-08-29T11:01:37.010+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campus with ID: 1
2025-08-29T11:01:37.012+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campus with ID: 1
2025-08-29T11:01:37.013+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching campus with ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.InstitutionServiceTest$GetCampusByIdTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests
2025-08-29T11:01:37.017+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Test Campus
2025-08-29T11:01:37.020+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Campus created successfully with ID: 1
2025-08-29T11:01:37.026+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Independent Campus
2025-08-29T11:01:37.027+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Campus created successfully with ID: 1
2025-08-29T11:01:37.028+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Test Campus
2025-08-29T11:01:37.032+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Minimal Campus
2025-08-29T11:01:37.032+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Campus created successfully with ID: 1
2025-08-29T11:01:37.034+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Test Campus
2025-08-29T11:01:37.034+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Campus created successfully with ID: 1
2025-08-29T11:01:37.036+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Test Campus
2025-08-29T11:01:37.039+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Test Campus
2025-08-29T11:01:37.041+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new campus: Test Campus
2025-08-29T11:01:37.041+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Campus created successfully with ID: 1
[ERROR] Tests run: 8, Failures: 3, Errors: 1, Skipped: 0, Time elapsed: 0.027 s <<< FAILURE! -- in com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests
[ERROR] com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldGenerateUniqueSlugWhenSlugExists -- Time elapsed: 0.009 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldGenerateUniqueSlugWhenSlugExists(InstitutionServiceTest.java:2496)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenCampusNameExistsInBrand -- Time elapsed: 0.003 s <<< FAILURE!
Wanted but not invoked:
brandRepository.findByIdAndIsActiveTrue(1L);
-> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenCampusNameExistsInBrand(InstitutionServiceTest.java:2483)
Actually, there were zero interactions with this mock.

        at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenCampusNameExistsInBrand(InstitutionServiceTest.java:2483)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowResourceNotFoundExceptionWhenBrandNotFound -- Time elapsed: 0.002 s <<< FAILURE!
org.mockito.exceptions.verification.NoInteractionsWanted:

No interactions wanted here:
-> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowResourceNotFoundExceptionWhenBrandNotFound(InstitutionServiceTest.java:2447)
But found these interactions on mock 'campusRepository':
-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:214)
-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:219)
***
For your reference, here is the list of all invocations ([?] - means unverified).
1. [?]-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:214)
2. [?]-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:219)

        at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowResourceNotFoundExceptionWhenBrandNotFound(InstitutionServiceTest.java:2447)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenUserHasNoAccessToBrand -- Time elapsed: 0.002 s <<< FAILURE!
Wanted but not invoked:
brandRepository.findByIdAndIsActiveTrue(1L);
-> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenUserHasNoAccessToBrand(InstitutionServiceTest.java:2464)
Actually, there were zero interactions with this mock.

        at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenUserHasNoAccessToBrand(InstitutionServiceTest.java:2464)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetSchoolDetailByIdTests
2025-08-29T11:01:37.044+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school detail with ID: 1
2025-08-29T11:01:37.046+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school detail with ID: 999
2025-08-29T11:01:37.047+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school detail with ID: 1
2025-08-29T11:01:37.049+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school detail with ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s -- in com.genixo.education.search.service.InstitutionServiceTest$GetSchoolDetailByIdTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetSchoolByIdTests
2025-08-29T11:01:37.051+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school with ID: 1
2025-08-29T11:01:37.052+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school with ID: 999
2025-08-29T11:01:37.054+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school with ID: 1
2025-08-29T11:01:37.056+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Fetching school with ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s -- in com.genixo.education.search.service.InstitutionServiceTest$GetSchoolByIdTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$CreateSchoolTests
2025-08-29T11:01:37.060+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Edge Case School
2025-08-29T11:01:37.060+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : School created successfully with ID: 1
2025-08-29T11:01:37.063+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Test School
2025-08-29T11:01:37.063+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : School created successfully with ID: 1
2025-08-29T11:01:37.066+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Age Range School
2025-08-29T11:01:37.066+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : School created successfully with ID: 1
2025-08-29T11:01:37.067+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Test School
2025-08-29T11:01:37.069+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Test School
2025-08-29T11:01:37.071+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Test School
2025-08-29T11:01:37.073+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Minimal School
2025-08-29T11:01:37.073+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : School created successfully with ID: 1
2025-08-29T11:01:37.075+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Test School
2025-08-29T11:01:37.075+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : School created successfully with ID: 1
2025-08-29T11:01:37.077+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Test School
2025-08-29T11:01:37.077+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : School created successfully with ID: 1
2025-08-29T11:01:37.079+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new school: Test School
[ERROR] Tests run: 10, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.022 s <<< FAILURE! -- in com.genixo.education.search.service.InstitutionServiceTest$CreateSchoolTests
[ERROR] com.genixo.education.search.service.InstitutionServiceTest$CreateSchoolTests.shouldGenerateUniqueSlugWhenSlugExists -- Time elapsed: 0.003 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$CreateSchoolTests.shouldGenerateUniqueSlugWhenSlugExists(InstitutionServiceTest.java:1998)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$SearchSchoolsTests
2025-08-29T11:01:37.084+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.085+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.086+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.086+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.087+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.089+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.091+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.093+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.095+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: nonexistent
2025-08-29T11:01:37.096+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
2025-08-29T11:01:37.098+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: test school
2025-08-29T11:01:37.100+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.020 s -- in com.genixo.education.search.service.InstitutionServiceTest$SearchSchoolsTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$SetSchoolPropertyValuesTests
2025-08-29T11:01:37.103+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for school: 1
2025-08-29T11:01:37.105+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for school: 1
2025-08-29T11:01:37.108+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for school: 1
2025-08-29T11:01:37.109+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for school: 999
2025-08-29T11:01:37.111+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for school: 1
2025-08-29T11:01:37.112+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for school: 1
2025-08-29T11:01:37.113+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for school: 1
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.013 s -- in com.genixo.education.search.service.InstitutionServiceTest$SetSchoolPropertyValuesTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$CreateInstitutionPropertyTests
2025-08-29T11:01:37.117+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: email-property
2025-08-29T11:01:37.117+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Institution property created with ID: 1
2025-08-29T11:01:37.119+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: test-property
2025-08-29T11:01:37.120+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: facilities
2025-08-29T11:01:37.122+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: text-property
2025-08-29T11:01:37.122+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Institution property created with ID: 1
2025-08-29T11:01:37.123+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: number-property
2025-08-29T11:01:37.123+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Institution property created with ID: 1
2025-08-29T11:01:37.123+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: boolean-property
2025-08-29T11:01:37.123+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Institution property created with ID: 1
2025-08-29T11:01:37.124+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: date-property
2025-08-29T11:01:37.124+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Institution property created with ID: 1
2025-08-29T11:01:37.125+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: facilities
2025-08-29T11:01:37.125+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Institution property created with ID: 1
2025-08-29T11:01:37.127+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: facilities
2025-08-29T11:01:37.128+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating institution property: minimal-property
2025-08-29T11:01:37.129+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Institution property created with ID: 1
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 s -- in com.genixo.education.search.service.InstitutionServiceTest$CreateInstitutionPropertyTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$SetCampusPropertyValuesTests
2025-08-29T11:01:37.131+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for campus: 1
2025-08-29T11:01:37.133+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for campus: 1
2025-08-29T11:01:37.135+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for campus: 1
2025-08-29T11:01:37.136+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for campus: 999
2025-08-29T11:01:37.137+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Setting property values for campus: 1
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.InstitutionServiceTest$SetCampusPropertyValuesTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests
2025-08-29T11:01:37.139+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to brand with slug: non-public-brand
2025-08-29T11:01:37.142+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to brand with slug: filtered-brand
2025-08-29T11:01:37.144+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to brand with slug: public-brand
2025-08-29T11:01:37.145+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to brand with slug: trending-brand
[ERROR] Tests run: 4, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 0.007 s <<< FAILURE! -- in com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests
[ERROR] com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldUseSpecializedRepositoryMethodForSubscriptionFiltering -- Time elapsed: 0.003 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldUseSpecializedRepositoryMethodForSubscriptionFiltering(InstitutionServiceTest.java:757)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldReturnBrandWithSubscribedCampusesSuccessfully -- Time elapsed: 0.001 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldReturnBrandWithSubscribedCampusesSuccessfully(InstitutionServiceTest.java:689)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldIncrementViewCountForPublicBrandAccess -- Time elapsed: 0.001 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldIncrementViewCountForPublicBrandAccess(InstitutionServiceTest.java:735)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests
2025-08-29T11:01:37.147+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to campus with slug: public-campus
2025-08-29T11:01:37.149+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to campus with slug: popular-campus
2025-08-29T11:01:37.151+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to campus with slug: non-existent-campus
[ERROR] Tests run: 3, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.005 s <<< FAILURE! -- in com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests
[ERROR] com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests.shouldReturnSubscribedCampusSuccessfully -- Time elapsed: 0.002 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests.shouldReturnSubscribedCampusSuccessfully(InstitutionServiceTest.java:615)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests.shouldIncrementViewCountForPublicCampusAccess -- Time elapsed: 0.001 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests.shouldIncrementViewCountForPublicCampusAccess(InstitutionServiceTest.java:661)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$GetPublicSchoolBySlugTests
2025-08-29T11:01:37.153+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to school with slug: public-school
2025-08-29T11:01:37.154+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to school with slug: non-existent-school
2025-08-29T11:01:37.156+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to school with slug: public-school
2025-08-29T11:01:37.156+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public access to school with slug: viewed-school
[ERROR] Tests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.005 s <<< FAILURE! -- in com.genixo.education.search.service.InstitutionServiceTest$GetPublicSchoolBySlugTests
[ERROR] com.genixo.education.search.service.InstitutionServiceTest$GetPublicSchoolBySlugTests.shouldIncrementViewCountWhenSchoolIsAccessedPublicly -- Time elapsed: 0.001 s <<< ERROR!
org.mockito.exceptions.misusing.PotentialStubbingProblem:

Strict stubbing argument mismatch. Please check:
 - this invocation of 'incrementViewCount' method:
    schoolRepository.incrementViewCount(2L);
    -> at com.genixo.education.search.service.InstitutionService.getPublicSchoolBySlug(InstitutionService.java:917)
 - has following stubbing(s) with different arguments:
    1. schoolRepository.incrementViewCount(1L);
      -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicSchoolBySlugTests.shouldIncrementViewCountWhenSchoolIsAccessedPublicly(InstitutionServiceTest.java:564)
Typically, stubbing argument mismatch indicates user mistake when writing tests.
Mockito fails early so that you can debug potential problem easily.
However, there are legit scenarios when this exception generates false negative signal:
  - stubbing the same method multiple times using 'given().will()' or 'when().then()' API
    Please use 'will().given()' or 'doReturn().when()' API for stubbing.
  - stubbed method is intentionally invoked with different arguments by code under test
    Please use default or 'silent' JUnit Rule (equivalent of Strictness.LENIENT).
For more information see javadoc for PotentialStubbingProblem class.
        at com.genixo.education.search.service.InstitutionService.getPublicSchoolBySlug(InstitutionService.java:917)
        at com.genixo.education.search.service.InstitutionServiceTest$GetPublicSchoolBySlugTests.shouldIncrementViewCountWhenSchoolIsAccessedPublicly(InstitutionServiceTest.java:568)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$PublicSearchSchoolsTests
2025-08-29T11:01:37.159+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public search for schools with criteria: public school
2025-08-29T11:01:37.159+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: public school
2025-08-29T11:01:37.161+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Public search for schools with criteria: school
2025-08-29T11:01:37.161+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Searching schools with criteria: school
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s -- in com.genixo.education.search.service.InstitutionServiceTest$PublicSearchSchoolsTests
[INFO] Running com.genixo.education.search.service.InstitutionServiceTest$CreateBrandTests
2025-08-29T11:01:37.164+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new brand: Test Brand
2025-08-29T11:01:37.164+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand created successfully with ID: 1
2025-08-29T11:01:37.166+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new brand: Test Brand
2025-08-29T11:01:37.167+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new brand: Test Brand
2025-08-29T11:01:37.167+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand created successfully with ID: 1
2025-08-29T11:01:37.171+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new brand: Test Brand!!! @#$ 123 & Co.
2025-08-29T11:01:37.171+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand created successfully with ID: 1
2025-08-29T11:01:37.174+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new brand: Minimal Brand
2025-08-29T11:01:37.174+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand created successfully with ID: 1
2025-08-29T11:01:37.175+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new brand: Test Brand
2025-08-29T11:01:37.176+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Creating new brand: Test Brand
2025-08-29T11:01:37.177+03:00  INFO 21884 --- [           main] c.g.e.search.service.InstitutionService  : Brand created successfully with ID: 1
[ERROR] Tests run: 7, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.015 s <<< FAILURE! -- in com.genixo.education.search.service.InstitutionServiceTest$CreateBrandTests
[ERROR] com.genixo.education.search.service.InstitutionServiceTest$CreateBrandTests.shouldGenerateUniqueSlugWhenSlugExists -- Time elapsed: 0.003 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$CreateBrandTests.shouldGenerateUniqueSlugWhenSlugExists(InstitutionServiceTest.java:292)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.509 s -- in com.genixo.education.search.service.InstitutionServiceTest
[INFO] Running com.genixo.education.search.service.CampaignServiceTest
[INFO] Running com.genixo.education.search.service.CampaignServiceTest$DeleteCampaignTests
2025-08-29T11:01:37.405+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Deleting campaign with ID: 999
2025-08-29T11:01:37.406+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Deleting campaign with ID: 1
2025-08-29T11:01:37.407+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Deleting campaign with ID: 1
2025-08-29T11:01:37.408+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign deleted successfully with ID: 1
2025-08-29T11:01:37.409+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Deleting campaign with ID: 1
2025-08-29T11:01:37.409+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Deleting campaign with ID: 1
2025-08-29T11:01:37.409+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign deleted successfully with ID: 1
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.232 s -- in com.genixo.education.search.service.CampaignServiceTest$DeleteCampaignTests
[INFO] Running com.genixo.education.search.service.CampaignServiceTest$UpdateCampaignTests
2025-08-29T11:01:37.412+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign with ID: 1
2025-08-29T11:01:37.412+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign updated successfully with ID: 1
2025-08-29T11:01:37.414+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign with ID: 1
2025-08-29T11:01:37.415+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign with ID: 1
2025-08-29T11:01:37.415+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign updated successfully with ID: 1
2025-08-29T11:01:37.416+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign with ID: 999
2025-08-29T11:01:37.418+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign with ID: 1
2025-08-29T11:01:37.419+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign with ID: 1
2025-08-29T11:01:37.419+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign updated successfully with ID: 1
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s -- in com.genixo.education.search.service.CampaignServiceTest$UpdateCampaignTests
[INFO] Running com.genixo.education.search.service.CampaignServiceTest$GetCampaignByIdTests
2025-08-29T11:01:37.420+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Fetching campaign with ID: 1
2025-08-29T11:01:37.422+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Fetching campaign with ID: 999
2025-08-29T11:01:37.423+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Fetching campaign with ID: 1
2025-08-29T11:01:37.424+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Fetching campaign with ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s -- in com.genixo.education.search.service.CampaignServiceTest$GetCampaignByIdTests
[INFO] Running com.genixo.education.search.service.CampaignServiceTest$RemoveSchoolFromCampaignTests
2025-08-29T11:01:37.426+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Removing school 999 from campaign: 1
2025-08-29T11:01:37.428+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Removing school 1 from campaign: 1
2025-08-29T11:01:37.429+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Removing school 1 from campaign: 1
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s -- in com.genixo.education.search.service.CampaignServiceTest$RemoveSchoolFromCampaignTests
[INFO] Running com.genixo.education.search.service.CampaignServiceTest$UpdateCampaignSchoolAssignmentTests
2025-08-29T11:01:37.432+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign school assignment: campaign=1, school=999
2025-08-29T11:01:37.434+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign school assignment: campaign=1, school=1
2025-08-29T11:01:37.436+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign school assignment: campaign=999, school=1
2025-08-29T11:01:37.437+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Updating campaign school assignment: campaign=1, school=1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s -- in com.genixo.education.search.service.CampaignServiceTest$UpdateCampaignSchoolAssignmentTests
[INFO] Running com.genixo.education.search.service.CampaignServiceTest$AssignSchoolsToCampaignTests
2025-08-29T11:01:37.438+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Assigning 1 schools to campaign: 999
2025-08-29T11:01:37.440+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Assigning 2 schools to campaign: 1
2025-08-29T11:01:37.442+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Assigning 2 schools to campaign: 1
2025-08-29T11:01:37.444+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Assigning 2 schools to campaign: 1
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.008 s <<< FAILURE! -- in com.genixo.education.search.service.CampaignServiceTest$AssignSchoolsToCampaignTests
[ERROR] com.genixo.education.search.service.CampaignServiceTest$AssignSchoolsToCampaignTests.shouldHandlePartialSuccessWhenSomeSchoolsAlreadyAssigned -- Time elapsed: 0.002 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <true> but was: <false>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)
        at org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)
        at org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:31)
        at org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:183)
        at com.genixo.education.search.service.CampaignServiceTest$AssignSchoolsToCampaignTests.shouldHandlePartialSuccessWhenSomeSchoolsAlreadyAssigned(CampaignServiceTest.java:1024)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.CampaignServiceTest$ValidatePromoCodeTests
2025-08-29T11:01:37.446+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Validating promo code: INVALID2024 for school: 1
2025-08-29T11:01:37.447+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Validating promo code: VALID2024 for school: 1
2025-08-29T11:01:37.448+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Validating promo code: VALID2024 for school: 999
2025-08-29T11:01:37.449+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Validating promo code: valid2024 for school: 1
2025-08-29T11:01:37.450+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Validating promo code: EXPIRED2024 for school: 1
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s -- in com.genixo.education.search.service.CampaignServiceTest$ValidatePromoCodeTests
[INFO] Running com.genixo.education.search.service.CampaignServiceTest$CreateCampaignUsageTests
2025-08-29T11:01:37.453+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.455+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.456+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign usage created with ID: null
2025-08-29T11:01:37.457+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.457+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign usage created with ID: 1
2025-08-29T11:01:37.467+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.468+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.468+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign usage created with ID: null
2025-08-29T11:01:37.478+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.479+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.480+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.481+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
2025-08-29T11:01:37.483+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating campaign usage for campaign: 1, school: 1
[ERROR] Tests run: 10, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.032 s <<< FAILURE! -- in com.genixo.education.search.service.CampaignServiceTest$CreateCampaignUsageTests
[ERROR] com.genixo.education.search.service.CampaignServiceTest$CreateCampaignUsageTests.shouldCreateCampaignUsageSuccessfullyWithPercentageDiscount -- Time elapsed: 0.009 s <<< FAILURE!
Wanted but not invoked:
campaignUsageRepository.save(
    <custom argument matcher>
);
-> at com.genixo.education.search.service.CampaignServiceTest$CreateCampaignUsageTests.shouldCreateCampaignUsageSuccessfullyWithPercentageDiscount(CampaignServiceTest.java:592)

However, there were exactly 3 interactions with this mock:
campaignUsageRepository.countByCampaignIdAndUserIdAndStatusNot(
    1L,
    1L,
    CANCELLED
);
-> at com.genixo.education.search.service.CampaignService.validateCampaignUsageLimits(CampaignService.java:755)

campaignUsageRepository.countByCampaignIdAndSchoolIdAndStatusNot(
    1L,
    1L,
    CANCELLED
);
-> at com.genixo.education.search.service.CampaignService.validateCampaignUsageLimits(CampaignService.java:764)

campaignUsageRepository.save(
    CampaignUsage(campaign=Campaign(title=Active Campaign, slug=null, description=null, shortDescription=null, campaignType=null, discountType=PERCENTAGE, discountAmount=null, discountPercentage=20.0, maxDiscountAmount=5000, minPurchaseAmount=null, startDate=2025-08-28, endDate=2025-09-28, earlyBirdEndDate=null, registrationDeadline=null, enrollmentStartDate=null, enrollmentEndDate=null, academicYear=null, status=DRAFT, isFeatured=false, isPublic=true, requiresApproval=false, usageLimit=100, usageCount=51, perUserLimit=2, perSchoolLimit=20, targetAudience=null, targetGradeLevels=null, targetAgeMin=null, targetAgeMax=null, targetNewStudentsOnly=false, targetSiblingDiscount=false, promoCode=EARLY2024, bannerImageUrl=null, thumbnailImageUrl=null, videoUrl=null, ctaText=null, ctaUrl=null, badgeText=null, badgeColor=null, termsAndConditions=null, finePrint=null, exclusions=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, clickCount=0, applicationCount=0, conversionCount=0, conversionRate=0.0, createdByUser=null, approvedBy=null, approvedAt=null, freeTrialDays=null, installmentOptions=null, paymentDeadlineDays=null, refundPolicy=null, freeServices=null, bonusFeatures=null, giftItems=null, priority=0, sortOrder=0, sendNotifications=true, notificationMessage=null, emailTemplateId=null, smsTemplateId=null, campaignSchools=[], campaignContents=[], campaignUsages=[]), school=School(name=Test School, slug=null, description=null, logoUrl=null, coverImageUrl=null, email=null, phone=null, extension=null, minAge=null, maxAge=null, capacity=null, currentStudentCount=0, classSizeAverage=null, curriculumType=null, languageOfInstruction=null, foreignLanguages=null, registrationFee=null, monthlyFee=null, annualFee=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, ratingAverage=0.0, ratingCount=0, likeCount=0, postCount=0, campus=null, institutionType=null, propertyValues=[], pricings=[], campaignSchools=[]), user=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=SYSTEM, expiresAt=null)]), usageDate=2025-08-29T11:01:37.457861, usageType=ENROLLMENT, status=PENDING, originalAmount=10000, discountAmount=2000.0, finalAmount=8000.0, promoCodeUsed=EARLY2024, studentName=John Doe, studentAge=8, gradeLevel=3rd Grade, enrollmentYear=2024-2025, parentName=Jane Doe, parentEmail=jane.doe@example.com, parentPhone=+90 555 123 4567, ipAddress=192.168.1.1, userAgent=Mozilla/5.0, referrerUrl=https://example.com/schools, utmSource=google, utmMedium=cpc, utmCampaign=early_bird, approvedBy=null, approvedAt=null, processedAt=null, notes=Parent interested in enrollment, internalNotes=null, followUpRequired=true, followUpDate=2025-09-01T11:01:37.457209, followUpCompleted=false, appointmentId=null, enrollmentId=null, invoiceId=null, validationCode=240FF96D, validationExpiresAt=2025-09-05T11:01:37.457890, isValidated=false, validatedAt=null)
);
-> at com.genixo.education.search.service.CampaignService.createCampaignUsage(CampaignService.java:472)


        at com.genixo.education.search.service.CampaignServiceTest$CreateCampaignUsageTests.shouldCreateCampaignUsageSuccessfullyWithPercentageDiscount(CampaignServiceTest.java:592)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests
2025-08-29T11:01:37.485+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Early Bird Discount
2025-08-29T11:01:37.487+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Minimal Campaign
2025-08-29T11:01:37.487+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign created successfully with ID: 1
2025-08-29T11:01:37.488+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Early Bird Discount
2025-08-29T11:01:37.490+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Invalid Date Campaign
2025-08-29T11:01:37.491+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Early Bird Discount
2025-08-29T11:01:37.492+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Empty Promo Campaign
2025-08-29T11:01:37.492+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign created successfully with ID: 1
2025-08-29T11:01:37.493+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Early Bird Discount
2025-08-29T11:01:37.496+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: No Promo Campaign
2025-08-29T11:01:37.496+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign created successfully with ID: 1
2025-08-29T11:01:37.497+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Early Bird Discount
2025-08-29T11:01:37.499+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: Early Bird Discount
2025-08-29T11:01:37.500+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Creating new campaign: No Schools Campaign
2025-08-29T11:01:37.500+03:00  INFO 21884 --- [           main] c.g.e.search.service.CampaignService     : Campaign created successfully with ID: 1
[ERROR] Tests run: 11, Failures: 0, Errors: 4, Skipped: 0, Time elapsed: 0.016 s <<< FAILURE! -- in com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests
[ERROR] com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldSetAllCampaignFieldsCorrectly -- Time elapsed: 0.002 s <<< ERROR!
com.genixo.education.search.common.exception.ResourceNotFoundException: Campaign not found
        at com.genixo.education.search.service.CampaignService.lambda$assignSchoolsToCampaign$17(CampaignService.java:806)
        at java.base/java.util.Optional.orElseThrow(Optional.java:403)
        at com.genixo.education.search.service.CampaignService.assignSchoolsToCampaign(CampaignService.java:806)
        at com.genixo.education.search.service.CampaignService.createCampaign(CampaignService.java:130)
        at com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldSetAllCampaignFieldsCorrectly(CampaignServiceTest.java:347)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldGenerateUniqueSlugWhenSlugExists -- Time elapsed: 0.001 s <<< ERROR!
com.genixo.education.search.common.exception.ResourceNotFoundException: Campaign not found
        at com.genixo.education.search.service.CampaignService.lambda$assignSchoolsToCampaign$17(CampaignService.java:806)
        at java.base/java.util.Optional.orElseThrow(Optional.java:403)
        at com.genixo.education.search.service.CampaignService.assignSchoolsToCampaign(CampaignService.java:806)
        at com.genixo.education.search.service.CampaignService.createCampaign(CampaignService.java:130)
        at com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldGenerateUniqueSlugWhenSlugExists(CampaignServiceTest.java:296)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldAllowCampusUserToCreateCampaign -- Time elapsed: 0.002 s <<< ERROR!
com.genixo.education.search.common.exception.ResourceNotFoundException: Campaign not found
        at com.genixo.education.search.service.CampaignService.lambda$assignSchoolsToCampaign$17(CampaignService.java:806)
        at java.base/java.util.Optional.orElseThrow(Optional.java:403)
        at com.genixo.education.search.service.CampaignService.assignSchoolsToCampaign(CampaignService.java:806)
        at com.genixo.education.search.service.CampaignService.createCampaign(CampaignService.java:130)
        at com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldAllowCampusUserToCreateCampaign(CampaignServiceTest.java:228)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldCreateCampaignSuccessfullyWithValidDataAndSchoolAssignments -- Time elapsed: 0.001 s <<< ERROR!
com.genixo.education.search.common.exception.ResourceNotFoundException: Campaign not found
        at com.genixo.education.search.service.CampaignService.lambda$assignSchoolsToCampaign$17(CampaignService.java:806)
        at java.base/java.util.Optional.orElseThrow(Optional.java:403)
        at com.genixo.education.search.service.CampaignService.assignSchoolsToCampaign(CampaignService.java:806)
        at com.genixo.education.search.service.CampaignService.createCampaign(CampaignService.java:130)
        at com.genixo.education.search.service.CampaignServiceTest$CreateCampaignTests.shouldCreateCampaignSuccessfullyWithValidDataAndSchoolAssignments(CampaignServiceTest.java:174)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.323 s -- in com.genixo.education.search.service.CampaignServiceTest
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$AddToWaitlistTests
2025-08-29T11:01:37.897+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Adding to waitlist for school: 1
2025-08-29T11:01:37.899+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Adding to waitlist for school: 1
[ERROR] Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.399 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$AddToWaitlistTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$AddToWaitlistTests.shouldAddToWaitlistSuccessfully -- Time elapsed: 0.002 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <jane Doe> but was: <Jane Doe>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1145)
        at com.genixo.education.search.service.AppointmentServiceTest$AddToWaitlistTests.shouldAddToWaitlistSuccessfully(AppointmentServiceTest.java:1810)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$GenerateAppointmentReportTests
2025-08-29T11:01:37.901+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Generating appointment report type: SUMMARY for school: 1 from 2025-07-30 to 2025-08-29
2025-08-29T11:01:37.904+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Generating appointment report type: INVALID_REPORT_TYPE for school: 1 from 2025-07-30 to 2025-08-29
2025-08-29T11:01:37.905+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Generating appointment report type: STAFF_PERFORMANCE for school: 1 from 2025-07-30 to 2025-08-29
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s -- in com.genixo.education.search.service.AppointmentServiceTest$GenerateAppointmentReportTests
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentStatisticsTests
2025-08-29T11:01:37.908+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment statistics for school: 1 from 2025-07-30 to 2025-08-29
2025-08-29T11:01:37.909+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment statistics for school: 1 from 2025-07-30 to 2025-08-29
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s -- in com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentStatisticsTests
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$GetAvailabilityBetweenDatesTests
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.014 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$GetAvailabilityBetweenDatesTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$GetAvailabilityBetweenDatesTests.shouldCalculateAvailabilityStatusCorrectly -- Time elapsed: 0.002 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <false> but was: <true>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertFalse.failNotFalse(AssertFalse.java:63)
        at org.junit.jupiter.api.AssertFalse.assertFalse(AssertFalse.java:36)
        at org.junit.jupiter.api.AssertFalse.assertFalse(AssertFalse.java:31)
        at org.junit.jupiter.api.Assertions.assertFalse(Assertions.java:231)
        at com.genixo.education.search.service.AppointmentServiceTest$GetAvailabilityBetweenDatesTests.shouldCalculateAvailabilityStatusCorrectly(AppointmentServiceTest.java:1589)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$PublicAppointmentTests
2025-08-29T11:01:37.925+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching public appointment with number: APT12345678
2025-08-29T11:01:37.927+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating public appointment for school: 1
2025-08-29T11:01:37.928+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Public appointment created with ID: 1 and number: APT54497927
2025-08-29T11:01:37.929+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating public appointment for school: 1
2025-08-29T11:01:37.930+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Canceling public appointment with number: APT12345678
2025-08-29T11:01:37.930+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Public appointment canceled with number: APT12345678
2025-08-29T11:01:37.931+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating public appointment for school: 999
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s -- in com.genixo.education.search.service.AppointmentServiceTest$PublicAppointmentTests
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$BulkUpdateAppointmentsTests
2025-08-29T11:01:37.933+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Performing bulk operation: CONFIRM on 2 appointments
2025-08-29T11:01:37.934+03:00  WARN 21884 --- [           main] c.g.e.search.service.AppointmentService  : Failed to process appointment 999 in bulk operation: Appointment not found with ID: 999
2025-08-29T11:01:37.935+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Bulk operation completed. Success: 1, Failed: 1
2025-08-29T11:01:37.936+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Performing bulk operation: INVALID_OPERATION on 1 appointments
2025-08-29T11:01:37.936+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Bulk operation completed. Success: 0, Failed: 0
2025-08-29T11:01:37.937+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Performing bulk operation: CANCEL on 1 appointments
2025-08-29T11:01:37.937+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Bulk operation completed. Success: 1, Failed: 0
2025-08-29T11:01:37.939+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Performing bulk operation: CONFIRM on 2 appointments
2025-08-29T11:01:37.939+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Bulk operation completed. Success: 2, Failed: 0
[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.007 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$BulkUpdateAppointmentsTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$BulkUpdateAppointmentsTests.shouldThrowExceptionForUnsupportedOperation -- Time elapsed: 0.001 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <1> but was: <0>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:538)
        at com.genixo.education.search.service.AppointmentServiceTest$BulkUpdateAppointmentsTests.shouldThrowExceptionForUnsupportedOperation(AppointmentServiceTest.java:1288)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentNotesTests
2025-08-29T11:01:37.941+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching notes for appointment: 1
2025-08-29T11:01:37.942+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching notes for appointment: 1
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s -- in com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentNotesTests
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$AddAppointmentNoteTests
2025-08-29T11:01:37.945+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Adding note to appointment: 999
2025-08-29T11:01:37.947+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Adding note to appointment: 1
2025-08-29T11:01:37.948+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Appointment note added with ID: 1
2025-08-29T11:01:37.949+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Adding note to appointment: 1
2025-08-29T11:01:37.950+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Appointment note added with ID: 1
2025-08-29T11:01:37.951+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Adding note to appointment: 1
2025-08-29T11:01:37.951+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Appointment note added with ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.AppointmentServiceTest$AddAppointmentNoteTests
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$SearchAppointmentsTests
2025-08-29T11:01:37.954+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Searching appointments with criteria: test
2025-08-29T11:01:37.956+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Searching appointments with criteria: test
2025-08-29T11:01:37.958+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Searching appointments with criteria: John Doe
[ERROR] Tests run: 3, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.007 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$SearchAppointmentsTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$SearchAppointmentsTests.shouldFilterByUserAccessibleSchoolIds -- Time elapsed: 0.002 s <<< ERROR!
java.lang.UnsupportedOperationException
        at java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)
        at java.base/java.util.ImmutableCollections$AbstractImmutableCollection.retainAll(ImmutableCollections.java:153)
        at com.genixo.education.search.service.AppointmentService.searchAppointments(AppointmentService.java:389)
        at com.genixo.education.search.service.AppointmentServiceTest$SearchAppointmentsTests.shouldFilterByUserAccessibleSchoolIds(AppointmentServiceTest.java:927)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.AppointmentServiceTest$SearchAppointmentsTests.shouldSearchAppointmentsWithAllFilters -- Time elapsed: 0.002 s <<< ERROR!
java.lang.UnsupportedOperationException
        at java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)
        at java.base/java.util.ImmutableCollections$AbstractImmutableCollection.retainAll(ImmutableCollections.java:153)
        at com.genixo.education.search.service.AppointmentService.searchAppointments(AppointmentService.java:389)
        at com.genixo.education.search.service.AppointmentServiceTest$SearchAppointmentsTests.shouldSearchAppointmentsWithAllFilters(AppointmentServiceTest.java:861)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$RescheduleAppointmentTests
2025-08-29T11:01:37.961+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Rescheduling appointment with ID: 1
2025-08-29T11:01:37.962+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Rescheduling appointment with ID: 1
2025-08-29T11:01:37.963+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Rescheduling appointment with ID: 1
2025-08-29T11:01:37.963+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Appointment rescheduled. Old ID: 1, New ID: 1
[ERROR] Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.008 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$RescheduleAppointmentTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$RescheduleAppointmentTests.shouldRescheduleAppointmentSuccessfully -- Time elapsed: 0.005 s <<< ERROR!
org.mockito.exceptions.misusing.PotentialStubbingProblem:

Strict stubbing argument mismatch. Please check:
 - this invocation of 'mapToDto' method:
    converterService.mapToDto(
    Appointment(appointmentNumber=APT12345678, appointmentSlot=AppointmentSlot(school=School(name=Test School, slug=null, description=null, logoUrl=null, coverImageUrl=null, email=null, phone=null, extension=null, minAge=null, maxAge=null, capacity=null, currentStudentCount=0, classSizeAverage=null, curriculumType=null, languageOfInstruction=null, foreignLanguages=null, registrationFee=null, monthlyFee=null, annualFee=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, ratingAverage=0.0, ratingCount=0, likeCount=0, postCount=0, campus=null, institutionType=null, propertyValues=[], pricings=[], campaignSchools=[]), staffUser=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=SCHOOL, expiresAt=null)]), dayOfWeek=MONDAY, startTime=09:00, endTime=10:00, durationMinutes=30, capacity=1, appointmentType=INFORMATION_MEETING, title=null, description=null, location=null, onlineMeetingAvailable=false, preparationRequired=false, preparationNotes=null, isRecurring=true, validFrom=null, validUntil=null, excludedDates=null, advanceBookingHours=24, maxAdvanceBookingDays=30, cancellationHours=4, requiresApproval=false, appointments=[]), school=School(name=Test School, slug=null, description=null, logoUrl=null, coverImageUrl=null, email=null, phone=null, extension=null, minAge=null, maxAge=null, capacity=null, currentStudentCount=0, classSizeAverage=null, curriculumType=null, languageOfInstruction=null, foreignLanguages=null, registrationFee=null, monthlyFee=null, annualFee=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, ratingAverage=0.0, ratingCount=0, likeCount=0, postCount=0, campus=null, institutionType=null, propertyValues=[], pricings=[], campaignSchools=[]), parentUser=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=BRAND, expiresAt=null)]), staffUser=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=SCHOOL, expiresAt=null)]), appointmentDate=2025-08-31, startTime=09:00, endTime=10:00, actualStartTime=null, actualEndTime=null, status=RESCHEDULED, appointmentType=INFORMATION_MEETING, title=null, description=null, location=null, isOnline=false, meetingUrl=null, meetingId=null, meetingPassword=null, parentName=John Doe, parentEmail=john@example.com, parentPhone=+90 555 123 4567, studentName=Jane Doe, studentAge=8, studentBirthDate=null, studentGender=null, currentSchool=null, gradeInterested=null, specialRequests=null, notes=null, internalNotes=null, confirmedAt=null, confirmedBy=null, reminderSentAt=null, followUpRequired=false, followUpDate=null, canceledAt=null, canceledBy=null, cancellationReason=null, canceledByType=null, rescheduledFromId=null, rescheduledToId=1, rescheduleCount=0, outcome=null, outcomeNotes=null, enrollmentLikelihood=null, nextSteps=null, surveySentAt=null, surveyCompletedAt=null, participants=[], appointmentNotes=[])
);
    -> at com.genixo.education.search.service.AppointmentService.rescheduleAppointment(AppointmentService.java:370)
 - has following stubbing(s) with different arguments:
    1. converterService.mapToDto(
    Appointment(appointmentNumber=APT87654321, appointmentSlot=null, school=null, parentUser=null, staffUser=null, appointmentDate=null, startTime=null, endTime=null, actualStartTime=null, actualEndTime=null, status=CONFIRMED, appointmentType=null, title=null, description=null, location=null, isOnline=false, meetingUrl=null, meetingId=null, meetingPassword=null, parentName=null, parentEmail=null, parentPhone=null, studentName=null, studentAge=null, studentBirthDate=null, studentGender=null, currentSchool=null, gradeInterested=null, specialRequests=null, notes=null, internalNotes=null, confirmedAt=null, confirmedBy=null, reminderSentAt=null, followUpRequired=false, followUpDate=null, canceledAt=null, canceledBy=null, cancellationReason=null, canceledByType=null, rescheduledFromId=null, rescheduledToId=null, rescheduleCount=0, outcome=null, outcomeNotes=null, enrollmentLikelihood=null, nextSteps=null, surveySentAt=null, surveyCompletedAt=null, participants=[], appointmentNotes=[])
);
      -> at com.genixo.education.search.service.AppointmentServiceTest$RescheduleAppointmentTests.shouldRescheduleAppointmentSuccessfully(AppointmentServiceTest.java:735)
Typically, stubbing argument mismatch indicates user mistake when writing tests.
Mockito fails early so that you can debug potential problem easily.
However, there are legit scenarios when this exception generates false negative signal:
  - stubbing the same method multiple times using 'given().will()' or 'when().then()' API
    Please use 'will().given()' or 'doReturn().when()' API for stubbing.
  - stubbed method is intentionally invoked with different arguments by code under test
    Please use default or 'silent' JUnit Rule (equivalent of Strictness.LENIENT).
For more information see javadoc for PotentialStubbingProblem class.
        at com.genixo.education.search.service.converter.AppointmentConverterService.mapToDto(AppointmentConverterService.java:120)
        at com.genixo.education.search.service.AppointmentService.rescheduleAppointment(AppointmentService.java:370)
        at com.genixo.education.search.service.AppointmentServiceTest$RescheduleAppointmentTests.shouldRescheduleAppointmentSuccessfully(AppointmentServiceTest.java:738)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$CancelAppointmentTests
2025-08-29T11:01:37.969+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Canceling appointment with ID: 1
2025-08-29T11:01:37.970+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Appointment canceled with ID: 1
2025-08-29T11:01:37.971+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Canceling appointment with ID: 1
2025-08-29T11:01:37.972+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Canceling appointment with ID: 1
[ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.005 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$CancelAppointmentTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$CancelAppointmentTests.shouldCancelAppointmentSuccessfully -- Time elapsed: 0.002 s <<< FAILURE!
org.opentest4j.AssertionFailedError: Unexpected exception type thrown, expected: <com.genixo.education.search.common.exception.BusinessException> but was: <java.lang.NullPointerException>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:67)
        at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
        at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3128)
        at com.genixo.education.search.service.AppointmentServiceTest$CancelAppointmentTests.shouldCancelAppointmentSuccessfully(AppointmentServiceTest.java:640)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
Caused by: java.lang.NullPointerException: Cannot invoke "com.genixo.education.search.entity.appointment.Appointment.getId()" because "appointment" is null
        at com.genixo.education.search.service.AppointmentService.cancelAppointment(AppointmentService.java:327)
        at com.genixo.education.search.service.AppointmentServiceTest$CancelAppointmentTests.lambda$shouldCancelAppointmentSuccessfully$0(AppointmentServiceTest.java:641)
        at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
        ... 7 more

[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentByIdTests
2025-08-29T11:01:37.974+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment with ID: 1
2025-08-29T11:01:37.975+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment with ID: 1
2025-08-29T11:01:37.976+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment with ID: 1
2025-08-29T11:01:37.977+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment with ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s -- in com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentByIdTests
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests
2025-08-29T11:01:37.979+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment for school: 1 on date: 2025-08-28
2025-08-29T11:01:37.980+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment for school: 1 on date: 2025-08-31
2025-08-29T11:01:37.982+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment for school: 1 on date: 2025-08-31
2025-08-29T11:01:37.983+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment for school: 1 on date: 2025-08-31
2025-08-29T11:01:37.985+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment for school: 1 on date: 2025-08-31
2025-08-29T11:01:37.986+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment for school: 1 on date: 2025-08-31
2025-08-29T11:01:37.986+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Appointment created with ID: 1 and number: APT54497986
[ERROR] Tests run: 6, Failures: 1, Errors: 2, Skipped: 0, Time elapsed: 0.008 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests.shouldCreateAppointmentSuccessfully -- Time elapsed: 0.001 s <<< ERROR!
com.genixo.education.search.common.exception.BusinessException: Appointment date does not match the slot's day of week
        at com.genixo.education.search.service.AppointmentService.validateAppointmentTime(AppointmentService.java:758)
        at com.genixo.education.search.service.AppointmentService.createAppointment(AppointmentService.java:170)
        at com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests.shouldCreateAppointmentSuccessfully(AppointmentServiceTest.java:406)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests.shouldThrowExceptionWhenNoCapacityAvailable -- Time elapsed: 0.002 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <No available capacity for the selected time slot> but was: <Appointment date does not match the slot's day of week>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1145)
        at com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests.shouldThrowExceptionWhenNoCapacityAvailable(AppointmentServiceTest.java:490)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests.shouldCreateAppointmentWithPendingStatusWhenApprovalRequired -- Time elapsed: 0.001 s <<< ERROR!
com.genixo.education.search.common.exception.BusinessException: Appointment date does not match the slot's day of week
        at com.genixo.education.search.service.AppointmentService.validateAppointmentTime(AppointmentService.java:758)
        at com.genixo.education.search.service.AppointmentService.createAppointment(AppointmentService.java:170)
        at com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentTests.shouldCreateAppointmentWithPendingStatusWhenApprovalRequired(AppointmentServiceTest.java:441)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentSlotByIdTests
2025-08-29T11:01:37.988+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment slot with ID: 1
2025-08-29T11:01:37.989+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment slot with ID: 1
2025-08-29T11:01:37.990+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Fetching appointment slot with ID: 999
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s -- in com.genixo.education.search.service.AppointmentServiceTest$GetAppointmentSlotByIdTests
[INFO] Running com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentSlotTests
2025-08-29T11:01:37.992+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment slot for school: 1
2025-08-29T11:01:37.993+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment slot for school: 1
2025-08-29T11:01:37.994+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment slot for school: 1
2025-08-29T11:01:37.996+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment slot for school: 1
2025-08-29T11:01:37.996+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Appointment slot created with ID: 1
2025-08-29T11:01:37.997+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment slot for school: 1
2025-08-29T11:01:37.998+03:00  INFO 21884 --- [           main] c.g.e.search.service.AppointmentService  : Creating appointment slot for school: 1
[ERROR] Tests run: 6, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 0.007 s <<< FAILURE! -- in com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentSlotTests
[ERROR] com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentSlotTests.shouldThrowExceptionWhenOverlappingSlotExists -- Time elapsed: 0.001 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <Overlapping appointment slot exists for the same time period> but was: <User does not have access to this school>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1145)
        at com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentSlotTests.shouldThrowExceptionWhenOverlappingSlotExists(AppointmentServiceTest.java:271)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentSlotTests.shouldCreateAppointmentSlotSuccessfully -- Time elapsed: 0.001 s <<< ERROR!
com.genixo.education.search.common.exception.BusinessException: User does not have access to this school
        at com.genixo.education.search.service.AppointmentService.validateUserCanAccessSchool(AppointmentService.java:669)
        at com.genixo.education.search.service.AppointmentService.createAppointmentSlot(AppointmentService.java:69)
        at com.genixo.education.search.service.AppointmentServiceTest$CreateAppointmentSlotTests.shouldCreateAppointmentSlotSuccessfully(AppointmentServiceTest.java:205)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.497 s -- in com.genixo.education.search.service.AppointmentServiceTest
[INFO] Running com.genixo.education.search.service.ContentServiceTest
[INFO] Running com.genixo.education.search.service.ContentServiceTest$CreateMessageTests
2025-08-29T11:01:38.454+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating message for school ID: 1
2025-08-29T11:01:38.457+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Message created successfully with reference: 89e80bf2-eadc-4c53-bcb3-8a3d050ed8f0
2025-08-29T11:01:38.463+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating message for school ID: 1
2025-08-29T11:01:38.463+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Message created successfully with reference: 4e964447-172c-4c9b-bf5a-534f795b1f78
2025-08-29T11:01:38.466+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating message for school ID: 1
2025-08-29T11:01:38.466+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Message created successfully with reference: 9fea5100-3044-499a-8ee7-632af385b948
2025-08-29T11:01:38.467+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating message for school ID: 1
2025-08-29T11:01:38.467+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Message created successfully with reference: fd33038c-deba-4b0c-9242-c96f6cb12b80
2025-08-29T11:01:38.469+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating message for school ID: 999
2025-08-29T11:01:38.470+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating message for school ID: 1
2025-08-29T11:01:38.471+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Message created successfully with reference: 8ee7dd34-46fe-4743-849f-7a29601daf07
2025-08-29T11:01:38.472+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating message for school ID: 1
2025-08-29T11:01:38.472+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Message created successfully with reference: a6e5726e-2176-46fd-80bc-0bd4409592eb
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.474 s -- in com.genixo.education.search.service.ContentServiceTest$CreateMessageTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$CreateGalleryTests
2025-08-29T11:01:38.476+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new gallery: Campus Facilities
2025-08-29T11:01:38.477+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery created successfully with ID: 1
2025-08-29T11:01:38.479+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new gallery: Brand History
2025-08-29T11:01:38.479+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery created successfully with ID: 1
2025-08-29T11:01:38.481+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new gallery: Orphan Gallery
2025-08-29T11:01:38.483+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new gallery: School Events Gallery
2025-08-29T11:01:38.483+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery created successfully with ID: 1
2025-08-29T11:01:38.485+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new gallery: School Events Gallery
2025-08-29T11:01:38.485+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery created successfully with ID: 1
2025-08-29T11:01:38.487+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new gallery: Minimal Gallery
2025-08-29T11:01:38.487+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery created successfully with ID: 1
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 s -- in com.genixo.education.search.service.ContentServiceTest$CreateGalleryTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$TogglePostLikeTests
2025-08-29T11:01:38.493+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: LIKE
2025-08-29T11:01:38.493+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post unliked by user: 1
2025-08-29T11:01:38.495+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 999 with reaction: LIKE
2025-08-29T11:01:38.498+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: LIKE
2025-08-29T11:01:38.499+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: LOVE
2025-08-29T11:01:38.499+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post liked by user: 1
2025-08-29T11:01:38.501+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: LIKE
2025-08-29T11:01:38.501+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post liked by user: 1
2025-08-29T11:01:38.501+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: LOVE
2025-08-29T11:01:38.502+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post liked by user: 1
2025-08-29T11:01:38.502+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: WOW
2025-08-29T11:01:38.502+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post liked by user: 1
2025-08-29T11:01:38.502+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: CONGRATULATIONS
2025-08-29T11:01:38.502+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post liked by user: 1
2025-08-29T11:01:38.502+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: THANKS
2025-08-29T11:01:38.505+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post liked by user: 1
2025-08-29T11:01:38.505+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Toggling like for post ID: 1 with reaction: SUPPORT
2025-08-29T11:01:38.505+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post liked by user: 1
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 s -- in com.genixo.education.search.service.ContentServiceTest$TogglePostLikeTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$UpdateMessageTests
2025-08-29T11:01:38.508+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating message with ID: 1
2025-08-29T11:01:38.510+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating message with ID: 1
2025-08-29T11:01:38.511+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating message with ID: 1
2025-08-29T11:01:38.512+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating message with ID: 999
2025-08-29T11:01:38.514+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating message with ID: 1
2025-08-29T11:01:38.515+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating message with ID: 1
2025-08-29T11:01:38.516+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating message with ID: 1
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s -- in com.genixo.education.search.service.ContentServiceTest$UpdateMessageTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$GetPublicPostBySlugTests
2025-08-29T11:01:38.518+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching public post with slug: popular-post
2025-08-29T11:01:38.519+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching public post with slug: public-post
2025-08-29T11:01:38.520+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching public post with slug: non-existent-post
2025-08-29T11:01:38.522+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching public post with slug: unsubscribed-post
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s -- in com.genixo.education.search.service.ContentServiceTest$GetPublicPostBySlugTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$UpdatePostTests
2025-08-29T11:01:38.525+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating post with ID: 1
2025-08-29T11:01:38.526+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post updated successfully with ID: 1
2025-08-29T11:01:38.528+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating post with ID: 1
2025-08-29T11:01:38.528+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post updated successfully with ID: 1
2025-08-29T11:01:38.529+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating post with ID: 1
2025-08-29T11:01:38.531+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating post with ID: 1
2025-08-29T11:01:38.531+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post updated successfully with ID: 1
2025-08-29T11:01:38.533+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Updating post with ID: 999
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.010 s -- in com.genixo.education.search.service.ContentServiceTest$UpdatePostTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$CreateGalleryItemTests
2025-08-29T11:01:38.536+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Adding item to gallery ID: 1
2025-08-29T11:01:38.537+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery item created successfully with ID: 1
2025-08-29T11:01:38.539+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Adding item to gallery ID: 999
2025-08-29T11:01:38.541+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Adding item to gallery ID: 1
2025-08-29T11:01:38.542+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Adding item to gallery ID: 1
2025-08-29T11:01:38.543+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery item created successfully with ID: 1
2025-08-29T11:01:38.544+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Adding item to gallery ID: 1
2025-08-29T11:01:38.545+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery item created successfully with ID: 1
2025-08-29T11:01:38.546+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Adding item to gallery ID: 1
2025-08-29T11:01:38.546+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery item created successfully with ID: 1
2025-08-29T11:01:38.547+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Adding item to gallery ID: 1
2025-08-29T11:01:38.548+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Gallery item created successfully with ID: 1
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 s -- in com.genixo.education.search.service.ContentServiceTest$CreateGalleryItemTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$GetPostCommentsTests
2025-08-29T11:01:38.551+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching comments for post ID: 1
2025-08-29T11:01:38.553+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching comments for post ID: 999
2025-08-29T11:01:38.555+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching comments for post ID: 1
2025-08-29T11:01:38.556+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Fetching comments for post ID: 1
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.ContentServiceTest$GetPostCommentsTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$CreatePostCommentTests
2025-08-29T11:01:38.559+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating comment for post ID: 1
2025-08-29T11:01:38.561+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating comment for post ID: 1
2025-08-29T11:01:38.562+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating comment for post ID: 1
2025-08-29T11:01:38.562+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Comment created successfully with ID: 1
2025-08-29T11:01:38.563+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating comment for post ID: 999
2025-08-29T11:01:38.564+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating comment for post ID: 1
2025-08-29T11:01:38.565+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Comment created successfully with ID: 1
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s -- in com.genixo.education.search.service.ContentServiceTest$CreatePostCommentTests
[INFO] Running com.genixo.education.search.service.ContentServiceTest$CreatePostTests
2025-08-29T11:01:38.567+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new post for school ID: 1
2025-08-29T11:01:38.568+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post created successfully with ID: 1
2025-08-29T11:01:38.570+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new post for school ID: 1
2025-08-29T11:01:38.570+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post created successfully with ID: 1
2025-08-29T11:01:38.571+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new post for school ID: 1
2025-08-29T11:01:38.572+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post created successfully with ID: 1
2025-08-29T11:01:38.573+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new post for school ID: 999
2025-08-29T11:01:38.575+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new post for school ID: 1
2025-08-29T11:01:38.575+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post created successfully with ID: 1
2025-08-29T11:01:38.576+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new post for school ID: 1
2025-08-29T11:01:38.578+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Creating new post for school ID: 1
2025-08-29T11:01:38.579+03:00  INFO 21884 --- [           main] c.g.e.search.service.ContentService      : Post created successfully with ID: 1
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.013 s -- in com.genixo.education.search.service.ContentServiceTest$CreatePostTests
[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.580 s -- in com.genixo.education.search.service.ContentServiceTest
[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest
[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest$ValidateUserAnalyticsAccessTests
[ERROR] Tests run: 7, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.259 s <<< FAILURE! -- in com.genixo.education.search.service.AnalyticsServiceTest$ValidateUserAnalyticsAccessTests
[ERROR] com.genixo.education.search.service.AnalyticsServiceTest$ValidateUserAnalyticsAccessTests.shouldAllowAccessWhenEntityIdsAreNull -- Time elapsed: 0.002 s <<< FAILURE!
org.opentest4j.AssertionFailedError: Unexpected exception thrown: com.genixo.education.search.common.exception.BusinessException: User does not have access to analytics data
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:152)
        at org.junit.jupiter.api.AssertDoesNotThrow.createAssertionFailedError(AssertDoesNotThrow.java:84)
        at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:53)
        at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:36)
        at org.junit.jupiter.api.Assertions.assertDoesNotThrow(Assertions.java:3199)
        at com.genixo.education.search.service.AnalyticsServiceTest$ValidateUserAnalyticsAccessTests.shouldAllowAccessWhenEntityIdsAreNull(AnalyticsServiceTest.java:1003)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
Caused by: com.genixo.education.search.common.exception.BusinessException: User does not have access to analytics data
        at com.genixo.education.search.service.AnalyticsService.validateUserAnalyticsAccess(AnalyticsService.java:453)
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at com.genixo.education.search.service.AnalyticsServiceTest$ValidateUserAnalyticsAccessTests.invokeValidateUserAnalyticsAccess(AnalyticsServiceTest.java:1013)
        at com.genixo.education.search.service.AnalyticsServiceTest$ValidateUserAnalyticsAccessTests.lambda$shouldAllowAccessWhenEntityIdsAreNull$6(AnalyticsServiceTest.java:1004)
        at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:49)
        ... 7 more

[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests
[ERROR] Tests run: 8, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 0.009 s <<< FAILURE! -- in com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests
[ERROR] com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests.shouldPreserveAlphanumericCharacters -- Time elapsed: 0 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <2024 anaokulu kayit> but was: <2024 anaokulu kayıt>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1145)
        at com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests.shouldPreserveAlphanumericCharacters(AnalyticsServiceTest.java:876)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests.shouldConvertToLowercase -- Time elapsed: 0.001 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <egitim sistemi> but was: <eğitim sistemi>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1145)
        at com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests.shouldConvertToLowercase(AnalyticsServiceTest.java:827)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests.shouldCleanQueryByRemovingSpecialCharacters -- Time elapsed: 0.001 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <okul secimi> but was: <okul seçimi>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1145)
        at com.genixo.education.search.service.AnalyticsServiceTest$CleanSearchQueryTests.shouldCleanQueryByRemovingSpecialCharacters(AnalyticsServiceTest.java:817)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest$ClassifySearchIntentTests
[ERROR] Tests run: 8, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.005 s <<< FAILURE! -- in com.genixo.education.search.service.AnalyticsServiceTest$ClassifySearchIntentTests
[ERROR] com.genixo.education.search.service.AnalyticsServiceTest$ClassifySearchIntentTests.shouldHandleComplexQueriesWithMultipleKeywords -- Time elapsed: 0 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <TRANSACTIONAL> but was: <PRICE_COMPARISON>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:1145)
        at com.genixo.education.search.service.AnalyticsServiceTest$ClassifySearchIntentTests.shouldHandleComplexQueriesWithMultipleKeywords(AnalyticsServiceTest.java:793)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest$CalculateGrowthRateTests
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s -- in com.genixo.education.search.service.AnalyticsServiceTest$CalculateGrowthRateTests
[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest$GetAnalyticsSummaryTests
2025-08-29T11:01:38.862+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2024-01-01 to 2024-01-31
2025-08-29T11:01:38.865+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2024-01-01 to 2024-01-31
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s -- in com.genixo.education.search.service.AnalyticsServiceTest$GetAnalyticsSummaryTests
[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest$LogVisitorTests
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s -- in com.genixo.education.search.service.AnalyticsServiceTest$LogVisitorTests
[INFO] Running com.genixo.education.search.service.AnalyticsServiceTest$GetDashboardTests
2025-08-29T11:01:38.885+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Generating analytics dashboard for period: 2024-01-01 to 2024-01-31
2025-08-29T11:01:38.886+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2024-01-01 to 2024-01-31
2025-08-29T11:01:38.886+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2023-12-01 to 2023-12-31
2025-08-29T11:01:38.889+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Generating analytics dashboard for period: 2024-01-01 to 2024-01-31
2025-08-29T11:01:38.889+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2024-01-01 to 2024-01-31
2025-08-29T11:01:38.889+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2023-12-01 to 2023-12-31
2025-08-29T11:01:38.892+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Generating analytics dashboard for period: 2024-01-01 to 2024-01-31
2025-08-29T11:01:38.892+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2024-01-01 to 2024-01-31
2025-08-29T11:01:38.892+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Getting analytics summary for period: 2023-12-01 to 2023-12-31
2025-08-29T11:01:38.894+03:00  INFO 21884 --- [           main] c.g.e.search.service.AnalyticsService    : Generating analytics dashboard for period: 2024-01-01 to 2024-01-31
[ERROR] Tests run: 4, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 0.017 s <<< FAILURE! -- in com.genixo.education.search.service.AnalyticsServiceTest$GetDashboardTests
[ERROR] com.genixo.education.search.service.AnalyticsServiceTest$GetDashboardTests.shouldAllowAccessForUserWithBrandAccess -- Time elapsed: 0.003 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.AnalyticsServiceTest$GetDashboardTests.shouldAllowAccessForUserWithBrandAccess(AnalyticsServiceTest.java:207)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[ERROR] com.genixo.education.search.service.AnalyticsServiceTest$GetDashboardTests.shouldHandleNullValuesInGrowthCalculationsGracefully -- Time elapsed: 0.002 s <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <100.0> but was: <0.0>
        at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
        at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
        at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:182)
        at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:177)
        at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:898)
        at com.genixo.education.search.service.AnalyticsServiceTest$GetDashboardTests.shouldHandleNullValuesInGrowthCalculationsGracefully(AnalyticsServiceTest.java:249)
        at java.base/java.lang.reflect.Method.invoke(Method.java:580)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)

[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.315 s -- in com.genixo.education.search.service.AnalyticsServiceTest
[INFO]
[INFO] Results:
[INFO]
[ERROR] Failures:
[ERROR]   AnalyticsServiceTest$ClassifySearchIntentTests.shouldHandleComplexQueriesWithMultipleKeywords:793 expected: <TRANSACTIONAL> but was: <PRICE_COMPARISON>
[ERROR]   AnalyticsServiceTest$CleanSearchQueryTests.shouldCleanQueryByRemovingSpecialCharacters:817 expected: <okul secimi> but was: <okul seçimi>
[ERROR]   AnalyticsServiceTest$CleanSearchQueryTests.shouldConvertToLowercase:827 expected: <egitim sistemi> but was: <eğitim sistemi>
[ERROR]   AnalyticsServiceTest$CleanSearchQueryTests.shouldPreserveAlphanumericCharacters:876 expected: <2024 anaokulu kayit> but was: <2024 anaokulu kayıt>
[ERROR]   AnalyticsServiceTest$GetDashboardTests.shouldHandleNullValuesInGrowthCalculationsGracefully:249 expected: <100.0> but was: <0.0>
[ERROR]   AnalyticsServiceTest$ValidateUserAnalyticsAccessTests.shouldAllowAccessWhenEntityIdsAreNull:1003 Unexpected exception thrown: com.genixo.education.search.common.exception.BusinessException: User does not have access to analytics data
[ERROR]   AppointmentServiceTest$AddToWaitlistTests.shouldAddToWaitlistSuccessfully:1810 expected: <jane Doe> but was: <Jane Doe>
[ERROR]   AppointmentServiceTest$BulkUpdateAppointmentsTests.shouldThrowExceptionForUnsupportedOperation:1288 expected: <1> but was: <0>
[ERROR]   AppointmentServiceTest$CancelAppointmentTests.shouldCancelAppointmentSuccessfully:640 Unexpected exception type thrown, expected: <com.genixo.education.search.common.exception.BusinessException> but was: <java.lang.NullPointerException>
[ERROR]   AppointmentServiceTest$CreateAppointmentSlotTests.shouldThrowExceptionWhenOverlappingSlotExists:271 expected: <Overlapping appointment slot exists for the same time period> but was: <User does not have access to this school>
[ERROR]   AppointmentServiceTest$CreateAppointmentTests.shouldThrowExceptionWhenNoCapacityAvailable:490 expected: <No available capacity for the selected time slot> but was: <Appointment date does not match the slot's day of week>
[ERROR]   AppointmentServiceTest$GetAvailabilityBetweenDatesTests.shouldCalculateAvailabilityStatusCorrectly:1589 expected: <false> but was: <true>
[ERROR]   CampaignServiceTest$AssignSchoolsToCampaignTests.shouldHandlePartialSuccessWhenSomeSchoolsAlreadyAssigned:1024 expected: <true> but was: <false>
[ERROR]   CampaignServiceTest$CreateCampaignUsageTests.shouldCreateCampaignUsageSuccessfullyWithPercentageDiscount:592
Wanted but not invoked:
campaignUsageRepository.save(
    <custom argument matcher>
);
-> at com.genixo.education.search.service.CampaignServiceTest$CreateCampaignUsageTests.shouldCreateCampaignUsageSuccessfullyWithPercentageDiscount(CampaignServiceTest.java:592)

However, there were exactly 3 interactions with this mock:
campaignUsageRepository.countByCampaignIdAndUserIdAndStatusNot(
    1L,
    1L,
    CANCELLED
);
-> at com.genixo.education.search.service.CampaignService.validateCampaignUsageLimits(CampaignService.java:755)

campaignUsageRepository.countByCampaignIdAndSchoolIdAndStatusNot(
    1L,
    1L,
    CANCELLED
);
-> at com.genixo.education.search.service.CampaignService.validateCampaignUsageLimits(CampaignService.java:764)

campaignUsageRepository.save(
    CampaignUsage(campaign=Campaign(title=Active Campaign, slug=null, description=null, shortDescription=null, campaignType=null, discountType=PERCENTAGE, discountAmount=null, discountPercentage=20.0, maxDiscountAmount=5000, minPurchaseAmount=null, startDate=2025-08-28, endDate=2025-09-28, earlyBirdEndDate=null, registrationDeadline=null, enrollmentStartDate=null, enrollmentEndDate=null, academicYear=null, status=DRAFT, isFeatured=false, isPublic=true, requiresApproval=false, usageLimit=100, usageCount=51, perUserLimit=2, perSchoolLimit=20, targetAudience=null, targetGradeLevels=null, targetAgeMin=null, targetAgeMax=null, targetNewStudentsOnly=false, targetSiblingDiscount=false, promoCode=EARLY2024, bannerImageUrl=null, thumbnailImageUrl=null, videoUrl=null, ctaText=null, ctaUrl=null, badgeText=null, badgeColor=null, termsAndConditions=null, finePrint=null, exclusions=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, clickCount=0, applicationCount=0, conversionCount=0, conversionRate=0.0, createdByUser=null, approvedBy=null, approvedAt=null, freeTrialDays=null, installmentOptions=null, paymentDeadlineDays=null, refundPolicy=null, freeServices=null, bonusFeatures=null, giftItems=null, priority=0, sortOrder=0, sendNotifications=true, notificationMessage=null, emailTemplateId=null, smsTemplateId=null, campaignSchools=[], campaignContents=[], campaignUsages=[]), school=School(name=Test School, slug=null, description=null, logoUrl=null, coverImageUrl=null, email=null, phone=null, extension=null, minAge=null, maxAge=null, capacity=null, currentStudentCount=0, classSizeAverage=null, curriculumType=null, languageOfInstruction=null, foreignLanguages=null, registrationFee=null, monthlyFee=null, annualFee=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, ratingAverage=0.0, ratingCount=0, likeCount=0, postCount=0, campus=null, institutionType=null, propertyValues=[], pricings=[], campaignSchools=[]), user=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=SYSTEM, expiresAt=null)]), usageDate=2025-08-29T11:01:37.457861, usageType=ENROLLMENT, status=PENDING, originalAmount=10000, discountAmount=2000.0, finalAmount=8000.0, promoCodeUsed=EARLY2024, studentName=John Doe, studentAge=8, gradeLevel=3rd Grade, enrollmentYear=2024-2025, parentName=Jane Doe, parentEmail=jane.doe@example.com, parentPhone=+90 555 123 4567, ipAddress=192.168.1.1, userAgent=Mozilla/5.0, referrerUrl=https://example.com/schools, utmSource=google, utmMedium=cpc, utmCampaign=early_bird, approvedBy=null, approvedAt=null, processedAt=null, notes=Parent interested in enrollment, internalNotes=null, followUpRequired=true, followUpDate=2025-09-01T11:01:37.457209, followUpCompleted=false, appointmentId=null, enrollmentId=null, invoiceId=null, validationCode=240FF96D, validationExpiresAt=2025-09-05T11:01:37.457890, isValidated=false, validatedAt=null)
);
-> at com.genixo.education.search.service.CampaignService.createCampaignUsage(CampaignService.java:472)


[ERROR]   InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenCampusNameExistsInBrand:2483
Wanted but not invoked:
brandRepository.findByIdAndIsActiveTrue(1L);
-> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenCampusNameExistsInBrand(InstitutionServiceTest.java:2483)
Actually, there were zero interactions with this mock.

[ERROR]   InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenUserHasNoAccessToBrand:2464
Wanted but not invoked:
brandRepository.findByIdAndIsActiveTrue(1L);
-> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowBusinessExceptionWhenUserHasNoAccessToBrand(InstitutionServiceTest.java:2464)
Actually, there were zero interactions with this mock.

[ERROR]   InstitutionServiceTest$CreateCampusTests.shouldThrowResourceNotFoundExceptionWhenBrandNotFound:2447
No interactions wanted here:
-> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldThrowResourceNotFoundExceptionWhenBrandNotFound(InstitutionServiceTest.java:2447)
But found these interactions on mock 'campusRepository':
-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:214)
-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:219)
***
For your reference, here is the list of all invocations ([?] - means unverified).
1. [?]-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:214)
2. [?]-> at com.genixo.education.search.service.InstitutionService.createCampus(InstitutionService.java:219)

[ERROR] Errors:
[ERROR]   AnalyticsServiceTest$GetDashboardTests.shouldAllowAccessForUserWithBrandAccess » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.AnalyticsServiceTest$GetDashboardTests.shouldAllowAccessForUserWithBrandAccess(AnalyticsServiceTest.java:207)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   AppointmentServiceTest$CreateAppointmentSlotTests.shouldCreateAppointmentSlotSuccessfully:205 » Business User does not have access to this school
[ERROR]   AppointmentServiceTest$CreateAppointmentTests.shouldCreateAppointmentSuccessfully:406 » Business Appointment date does not match the slot's day of week
[ERROR]   AppointmentServiceTest$CreateAppointmentTests.shouldCreateAppointmentWithPendingStatusWhenApprovalRequired:441 » Business Appointment date does not match the slot's day of week
[ERROR]   AppointmentServiceTest$RescheduleAppointmentTests.shouldRescheduleAppointmentSuccessfully:738 » PotentialStubbingProblem
Strict stubbing argument mismatch. Please check:
 - this invocation of 'mapToDto' method:
    converterService.mapToDto(
    Appointment(appointmentNumber=APT12345678, appointmentSlot=AppointmentSlot(school=School(name=Test School, slug=null, description=null, logoUrl=null, coverImageUrl=null, email=null, phone=null, extension=null, minAge=null, maxAge=null, capacity=null, currentStudentCount=0, classSizeAverage=null, curriculumType=null, languageOfInstruction=null, foreignLanguages=null, registrationFee=null, monthlyFee=null, annualFee=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, ratingAverage=0.0, ratingCount=0, likeCount=0, postCount=0, campus=null, institutionType=null, propertyValues=[], pricings=[], campaignSchools=[]), staffUser=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=SCHOOL, expiresAt=null)]), dayOfWeek=MONDAY, startTime=09:00, endTime=10:00, durationMinutes=30, capacity=1, appointmentType=INFORMATION_MEETING, title=null, description=null, location=null, onlineMeetingAvailable=false, preparationRequired=false, preparationNotes=null, isRecurring=true, validFrom=null, validUntil=null, excludedDates=null, advanceBookingHours=24, maxAdvanceBookingDays=30, cancellationHours=4, requiresApproval=false, appointments=[]), school=School(name=Test School, slug=null, description=null, logoUrl=null, coverImageUrl=null, email=null, phone=null, extension=null, minAge=null, maxAge=null, capacity=null, currentStudentCount=0, classSizeAverage=null, curriculumType=null, languageOfInstruction=null, foreignLanguages=null, registrationFee=null, monthlyFee=null, annualFee=null, metaTitle=null, metaDescription=null, metaKeywords=null, viewCount=0, ratingAverage=0.0, ratingCount=0, likeCount=0, postCount=0, campus=null, institutionType=null, propertyValues=[], pricings=[], campaignSchools=[]), parentUser=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=BRAND, expiresAt=null)]), staffUser=User(email=null, phone=null, password=null, firstName=null, lastName=null, userType=null, isEmailVerified=false, isPhoneVerified=false, emailVerificationToken=null, phoneVerificationCode=null, passwordResetToken=null, passwordResetExpiresAt=null, lastLoginAt=null, profileImageUrl=null, country=null, province=null, district=null, neighborhood=null, addressLine1=null, addressLine2=null, postalCode=null, latitude=null, longitude=null, institutionAccess=[], userRoles=[UserRole(user=null, role=null, departments=[], permissions=[], roleLevel=SCHOOL, expiresAt=null)]), appointmentDate=2025-08-31, startTime=09:00, endTime=10:00, actualStartTime=null, actualEndTime=null, status=RESCHEDULED, appointmentType=INFORMATION_MEETING, title=null, description=null, location=null, isOnline=false, meetingUrl=null, meetingId=null, meetingPassword=null, parentName=John Doe, parentEmail=john@example.com, parentPhone=+90 555 123 4567, studentName=Jane Doe, studentAge=8, studentBirthDate=null, studentGender=null, currentSchool=null, gradeInterested=null, specialRequests=null, notes=null, internalNotes=null, confirmedAt=null, confirmedBy=null, reminderSentAt=null, followUpRequired=false, followUpDate=null, canceledAt=null, canceledBy=null, cancellationReason=null, canceledByType=null, rescheduledFromId=null, rescheduledToId=1, rescheduleCount=0, outcome=null, outcomeNotes=null, enrollmentLikelihood=null, nextSteps=null, surveySentAt=null, surveyCompletedAt=null, participants=[], appointmentNotes=[])
);
    -> at com.genixo.education.search.service.AppointmentService.rescheduleAppointment(AppointmentService.java:370)
 - has following stubbing(s) with different arguments:
    1. converterService.mapToDto(
    Appointment(appointmentNumber=APT87654321, appointmentSlot=null, school=null, parentUser=null, staffUser=null, appointmentDate=null, startTime=null, endTime=null, actualStartTime=null, actualEndTime=null, status=CONFIRMED, appointmentType=null, title=null, description=null, location=null, isOnline=false, meetingUrl=null, meetingId=null, meetingPassword=null, parentName=null, parentEmail=null, parentPhone=null, studentName=null, studentAge=null, studentBirthDate=null, studentGender=null, currentSchool=null, gradeInterested=null, specialRequests=null, notes=null, internalNotes=null, confirmedAt=null, confirmedBy=null, reminderSentAt=null, followUpRequired=false, followUpDate=null, canceledAt=null, canceledBy=null, cancellationReason=null, canceledByType=null, rescheduledFromId=null, rescheduledToId=null, rescheduleCount=0, outcome=null, outcomeNotes=null, enrollmentLikelihood=null, nextSteps=null, surveySentAt=null, surveyCompletedAt=null, participants=[], appointmentNotes=[])
);
      -> at com.genixo.education.search.service.AppointmentServiceTest$RescheduleAppointmentTests.shouldRescheduleAppointmentSuccessfully(AppointmentServiceTest.java:735)
Typically, stubbing argument mismatch indicates user mistake when writing tests.
Mockito fails early so that you can debug potential problem easily.
However, there are legit scenarios when this exception generates false negative signal:
  - stubbing the same method multiple times using 'given().will()' or 'when().then()' API
    Please use 'will().given()' or 'doReturn().when()' API for stubbing.
  - stubbed method is intentionally invoked with different arguments by code under test
    Please use default or 'silent' JUnit Rule (equivalent of Strictness.LENIENT).
For more information see javadoc for PotentialStubbingProblem class.
[ERROR]   AppointmentServiceTest$SearchAppointmentsTests.shouldFilterByUserAccessibleSchoolIds:927 » UnsupportedOperation
[ERROR]   AppointmentServiceTest$SearchAppointmentsTests.shouldSearchAppointmentsWithAllFilters:861 » UnsupportedOperation
[ERROR]   CampaignServiceTest$CreateCampaignTests.shouldAllowCampusUserToCreateCampaign:228 » ResourceNotFound Campaign not found
[ERROR]   CampaignServiceTest$CreateCampaignTests.shouldCreateCampaignSuccessfullyWithValidDataAndSchoolAssignments:174 » ResourceNotFound Campaign not found
[ERROR]   CampaignServiceTest$CreateCampaignTests.shouldGenerateUniqueSlugWhenSlugExists:296 » ResourceNotFound Campaign not found
[ERROR]   CampaignServiceTest$CreateCampaignTests.shouldSetAllCampaignFieldsCorrectly:347 » ResourceNotFound Campaign not found
[ERROR]   InstitutionServiceTest$CreateBrandTests.shouldGenerateUniqueSlugWhenSlugExists » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$CreateBrandTests.shouldGenerateUniqueSlugWhenSlugExists(InstitutionServiceTest.java:292)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$CreateCampusTests.shouldGenerateUniqueSlugWhenSlugExists » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$CreateCampusTests.shouldGenerateUniqueSlugWhenSlugExists(InstitutionServiceTest.java:2496)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$CreateSchoolTests.shouldGenerateUniqueSlugWhenSlugExists » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$CreateSchoolTests.shouldGenerateUniqueSlugWhenSlugExists(InstitutionServiceTest.java:1998)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$GetPublicBrandBySlugTests.shouldIncrementViewCountForPublicBrandAccess » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldIncrementViewCountForPublicBrandAccess(InstitutionServiceTest.java:735)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$GetPublicBrandBySlugTests.shouldReturnBrandWithSubscribedCampusesSuccessfully » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldReturnBrandWithSubscribedCampusesSuccessfully(InstitutionServiceTest.java:689)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$GetPublicBrandBySlugTests.shouldUseSpecializedRepositoryMethodForSubscriptionFiltering » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicBrandBySlugTests.shouldUseSpecializedRepositoryMethodForSubscriptionFiltering(InstitutionServiceTest.java:757)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$GetPublicCampusBySlugTests.shouldIncrementViewCountForPublicCampusAccess » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests.shouldIncrementViewCountForPublicCampusAccess(InstitutionServiceTest.java:661)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$GetPublicCampusBySlugTests.shouldReturnSubscribedCampusSuccessfully » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicCampusBySlugTests.shouldReturnSubscribedCampusSuccessfully(InstitutionServiceTest.java:615)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[ERROR]   InstitutionServiceTest$GetPublicSchoolBySlugTests.shouldIncrementViewCountWhenSchoolIsAccessedPublicly:568 » PotentialStubbingProblem
Strict stubbing argument mismatch. Please check:
 - this invocation of 'incrementViewCount' method:
    schoolRepository.incrementViewCount(2L);
    -> at com.genixo.education.search.service.InstitutionService.getPublicSchoolBySlug(InstitutionService.java:917)
 - has following stubbing(s) with different arguments:
    1. schoolRepository.incrementViewCount(1L);
      -> at com.genixo.education.search.service.InstitutionServiceTest$GetPublicSchoolBySlugTests.shouldIncrementViewCountWhenSchoolIsAccessedPublicly(InstitutionServiceTest.java:564)
Typically, stubbing argument mismatch indicates user mistake when writing tests.
Mockito fails early so that you can debug potential problem easily.
However, there are legit scenarios when this exception generates false negative signal:
  - stubbing the same method multiple times using 'given().will()' or 'when().then()' API
    Please use 'will().given()' or 'doReturn().when()' API for stubbing.
  - stubbed method is intentionally invoked with different arguments by code under test
    Please use default or 'silent' JUnit Rule (equivalent of Strictness.LENIENT).
For more information see javadoc for PotentialStubbingProblem class.
[ERROR]   SubscriptionServiceTest$ChangeSubscriptionPlanTests.shouldChangeSubscriptionPlanSuccessfullyWithUpgrade:529 » NullPointer temporal
[ERROR]   SubscriptionServiceTest$GetSubscriptionAnalyticsTests.shouldHandleSubscriptionWithNoPayments:976 » NullPointer temporal
[ERROR]   SubscriptionServiceTest$GetSubscriptionAnalyticsTests.shouldReturnComprehensiveSubscriptionAnalytics:944 » NullPointer temporal
[ERROR]   SubscriptionServiceTest$ProcessPaymentTests.shouldHandlePaymentFailureGracefully:682 » NullPointer Cannot invoke "java.time.LocalDateTime.minusMonths(long)" because the return value of "com.genixo.education.search.entity.subscription.Subscription.getNextBillingDate()" is null
[ERROR]   SubscriptionServiceTest$ProcessPaymentTests.shouldHandlePaymentProcessingException:715 » NullPointer Cannot invoke "java.time.LocalDateTime.minusMonths(long)" because the return value of "com.genixo.education.search.entity.subscription.Subscription.getNextBillingDate()" is null
[ERROR]   SubscriptionServiceTest$ProcessPaymentTests.shouldProcessPaymentSuccessfully:646 » NullPointer Cannot invoke "java.time.LocalDateTime.minusMonths(long)" because the return value of "com.genixo.education.search.entity.subscription.Subscription.getNextBillingDate()" is null
[INFO]
[ERROR] Tests run: 334, Failures: 17, Errors: 26, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  17.001 s
[INFO] Finished at: 2025-08-29T11:01:38+03:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.5.3:test (default-test) on project search: There are test failures.
[ERROR]
[ERROR] See /Users/developer/Desktop/Projects/search-for-education/search-for-education-parent/target/surefire-reports for the individual test results.
[ERROR] See dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
developer@Ceyhuns-MacBook-Pro search-for-education-parent %